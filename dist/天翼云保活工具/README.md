# 天翼云保活工具 - 最复杂版本

天翼云电脑自动连接保活，阻止休眠。支持多账号管理、定时调度、实时监控等高级功能。

## 🚀 快速开始

### 1. 安装Python环境
- Python 3.7+ (推荐Python 3.8或更高版本)
- Windows用户：从[官网](https://www.python.org/downloads/)下载安装
- Linux用户：`apt install python3` 或 `yum install python3`

### 2. 安装依赖
```bash
pip install -r requirements.txt
```

### 3. 启动程序

#### 🖥️ GUI版本（推荐）
```bash
# 双击启动脚本
启动天翼云保活工具.bat

# 或直接运行
python improved_gui.py
```

#### 💻 命令行版本
```bash
python ctyun-alive.py <手机号> <密码> [浏览器类型] [浏览器路径] [监听端口]
```

## 📋 主要功能

### 🎯 多账号管理
- 支持添加、编辑、删除多个天翼云账号
- 独立管理每个账号的启用状态
- 实时显示每个账号的保活状态

### ⏰ 智能调度
- 定时自动保活（可设置间隔时间）
- 支持时间窗口控制（如8:00-22:00）
- 周末保活开关
- 失败自动重试机制

### 🖥️ 图形界面
- **账号管理** - 添加/编辑/删除账号，查看状态
- **调度器设置** - 自定义保活间隔，24小时运行控制
- **详细日志** - 完整的操作记录和错误信息

### 🔧 高级特性
- 自动浏览器驱动下载
- 验证码自动识别
- 保活截图保存
- 详细操作日志

## 📁 文件结构

```
ctyun_keepalive/
├── improved_gui.py              # 🎯 主程序GUI界面
├── improved_account_manager.py  # 🔧 账号管理核心
├── ctyun-alive.py              # 💻 命令行版本
├── my_captcha.py               # 🔍 验证码识别
├── webthread.py                # 🌐 Web服务线程
├── logger.py                   # 📝 日志功能
├── requirements.txt            # 📦 依赖列表
├── accounts_config.json        # ⚙️ 账号配置
├── my.json                     # ⚙️ 基础配置
├── 启动天翼云保活工具.bat      # 🚀 GUI启动脚本
├── 命令行版本.bat              # 💻 命令行帮助
├── logs/                       # 📂 日志目录
└── static/                     # 📂 截图目录
```

## ⚙️ 配置说明

### GUI配置
启动GUI后在"账号管理"页面直接添加和配置账号。

### 命令行配置
编辑 `my.json` 文件：
```json
{
  "account": "你的手机号",
  "password": "你的密码",
  "browserType": "chrome",
  "browserPath": "",
  "listenport": 8000,
  "push_token": ""
}
```

## 🔍 故障排除

### 常见问题
1. **浏览器启动失败** - 程序会自动下载浏览器驱动
2. **登录失败** - 检查账号密码，可能需要处理验证码
3. **连接超时** - 检查网络连接，程序会自动重试

### 日志查看
- GUI版本：在"详细日志"标签页查看
- 文件日志：`logs/improved_account.log`
- 截图文件：`static/` 目录

## 📝 注意事项

- 确保账号密码正确
- 首次运行可能需要处理验证码
- 支持Chrome和Edge浏览器
- 程序会自动下载和管理浏览器驱动
- 建议在稳定网络环境下使用

## 🎯 版本特点

这是项目的**最复杂优化版本**，包含：
- 完整的多账号管理功能
- 高级的定时调度系统
- 直观的图形化操作界面
- 详细的日志和监控功能
- 自动化的错误处理机制

相比其他版本，功能最全面，操作最便捷！
  
